# Damascus Documentation

Damascus is a powerful Python tool for generating SDKs from OpenAPI specifications. It allows you to create type-safe, well-documented Python clients for any API that provides an OpenAPI specification.

## Table of Contents

- [Installation](#installation)
- [Compatibility](#compatibility)
- [Quick Start](#quick-start)
- [Authentication](#authentication)
- [API Reference](#api-reference)
- [CLI Usage](cli.md)
- [Examples](#examples)
- [Frequently Asked Questions](#faq)

## Installation

Install Damascus using pip:

```bash
pip install damascus
```

Or using uv (recommended):

```bash
uv pip install damascus
```

## Compatibility

- **SDK Runtime**: Python 3.8+
- **Development**: Python 3.13+ with uv package manager

While Damascus is developed using Python 3.13, the generated SDKs are fully compatible with Python 3.8 and above.

## Quick Start

### Generating an SDK

```bash
# Generate an SDK from a local OpenAPI specification
damascus generate -i openapi.json -o my_sdk

# Generate an SDK from a remote OpenAPI specification
damascus generate -i https://example.com/api/openapi.json -o my_sdk
```

### Using a Generated SDK

```python
from my_sdk import Client

# Initialize client with API key authentication
client = Client(
    base_url="https://api.example.com",
    api_key="your-api-key"
)

# Make API calls using the generated client
response = client.get_resource("resource-id")
print(f"Got resource: {response.name}")
```

## Authentication

Damascus-generated SDKs support two authentication methods:

### API Key Authentication

```python
client = Client(
    base_url="https://api.example.com",
    api_key="your-api-key"
)
```

### JWT Token Authentication

```python
client = Client(
    base_url="https://api.example.com",
    jwt_token="your-jwt-token"
)
```

### Environment Variables

You can also use environment variables for authentication:

```bash
export DAMASCUS_BASE_URL="https://api.example.com"
export DAMASCUS_API_KEY="your-api-key"
# or
export DAMASCUS_JWT_TOKEN="your-jwt-token"
```

```python
# Will use environment variables
client = Client()
```

## API Reference

### Client

The `Client` class is the main entry point for SDKs generated by Damascus.

```python
from my_sdk import Client

client = Client(
    base_url=None,              # API base URL
    api_key=None,               # API key for authentication
    jwt_token=None,             # JWT token for authentication
    timeout=10.0,               # Request timeout
    verify_ssl=True,            # Verify SSL certificates
    retry_enabled=True,         # Enable request retries
    max_retries=3               # Maximum retry attempts
)
```

### Methods

The methods available in your client will depend on the OpenAPI specification used to generate the SDK. All client methods follow consistent patterns for parameters and return types, with proper type annotations.

### Error Handling

Damascus provides several exception types for handling errors:

```python
from damascus import (
    DamascusError,          # Base exception class
    AuthenticationError,     # Authentication failures
    ConfigurationError,      # Configuration issues
    ResourceNotFoundError,   # Resource not found (404)
    ValidationError,         # Input validation errors
    RateLimitError,          # Rate limiting errors
    ServerError              # Server-side errors
)

try:
    client.get_resource()
except AuthenticationError as e:
    print(f"Authentication failed: {e}")
except DamascusError as e:
    print(f"API error: {e}")
    if hasattr(e, "status_code"):
        print(f"Status code: {e.status_code}")
```

## Examples

See the [examples](../examples) directory for more usage examples.

## FAQ

### How do I handle connection timeouts?

You can adjust the timeout setting when creating a client:

```python
client = Client(
    base_url="https://api.example.com",
    api_key="your-api-key",
    timeout=30.0  # 30 seconds timeout
)
```

### How do I disable SSL verification for testing?

```python
client = Client(
    base_url="https://api.example.com",
    api_key="your-api-key",
    verify_ssl=False  # Disable SSL verification (not recommended for production)
)
```

### How do I use the client as a context manager?

```python
with Client(
    base_url="https://api.example.com",
    api_key="your-api-key"
) as client:
    # The client will be automatically closed when exiting the with block
    result = client.get_resource("resource-id")
    print(f"Got resource: {result.name}")
```

### Which Python versions are supported?

Damascus supports Python 3.8 and above for runtime usage. However, for development of the Damascus project itself, Python 3.13+ is required with the uv package manager. 